<article>
  <ng-container *ngIf="agencies$ | async as agencies; else loading">
    <ng-container *ngIf="agencies.data; else error">
      <ng-container *ngIf="agencies.data.length>0; else empty">
        <header>There are {{agencies.data.length}} agencies</header>
        <main>
          <stk-agencies [agencies]="agencies.data"></stk-agencies>
        </main>
        <footer>
          <stk-refresh (refresh)="loadAgencies()"></stk-refresh>
        </footer>
      </ng-container>
      <ng-template #empty>
        <stk-empty dataName="agencies"></stk-empty>
      </ng-template>
    </ng-container>
    <ng-template #error>
      <stk-error dataName="agencies"
                 [error]="agencies.error || ''"></stk-error>
    </ng-template>
  </ng-container>
  <ng-template #loading>
    <stk-loading></stk-loading>
  </ng-template>
</article>

<article>
  <ng-container *ngIf="trips$ | async as trips; else loading">
    <ng-container *ngIf="trips.data; else error">
      <ng-container *ngIf="trips.data.length>0; else empty">
        <header>There are {{trips.data.length}} trips</header>
        <main>
          <stk-trips [trips]="trips.data"></stk-trips>
        </main>
        <footer>
          <stk-refresh (refresh)="loadTrips()"></stk-refresh>
        </footer>
      </ng-container>
      <ng-template #empty>
        <stk-empty dataName="trips"></stk-empty>
      </ng-template>
    </ng-container>
    <ng-template #error>
      <stk-error dataName="trips"
                 [error]="trips.error || ''"></stk-error>
    </ng-template>
  </ng-container>
  <ng-template #loading>
    <stk-loading></stk-loading>
  </ng-template>
</article>
